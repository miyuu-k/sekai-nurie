<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>せかいぬりえ - HuggingFace Spaces版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FFB6C1 0%, #FFE4E1 50%, #FFF8DC 100%);
            min-height: 100vh;
            color: #8B4513;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 3rem;
            color: #FF69B4;
            text-shadow: 3px 3px 0px #FFB6C1;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .subtitle {
            font-size: 1.2rem;
            color: #FF1493;
            margin-bottom: 20px;
        }

        .info-box {
            background: #E6F3FF;
            border: 3px solid #87CEEB;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #4682B4;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .space-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .space-button {
            background: linear-gradient(45deg, #9370DB, #BA55D3);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: 1rem;
            min-width: 180px;
        }

        .space-button.active {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.4);
        }

        .space-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(147, 112, 219, 0.4);
        }

        .space-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(255, 105, 180, 0.3);
            border: 4px solid #FFB6C1;
            position: relative;
            overflow: hidden;
        }

        .space-title {
            font-size: 1.5rem;
            color: #FF69B4;
            margin-bottom: 15px;
            text-align: center;
        }

        .space-description {
            color: #8B4513;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.6;
        }

        .space-iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            z-index: 10;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #FFB6C1;
            border-top: 5px solid #FF69B4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .instructions {
            background: #F0F8FF;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #87CEEB;
        }

        .instructions h3 {
            color: #4682B4;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .instructions ol {
            color: #2F4F4F;
            font-size: 1.1rem;
            line-height: 1.6;
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .space-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .space-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            border: 3px solid #FFB6C1;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .space-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
        }

        .space-card h4 {
            color: #FF69B4;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .space-card p {
            color: #8B4513;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .space-card .features {
            list-style: none;
            padding: 0;
        }

        .space-card .features li {
            color: #2F4F4F;
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .space-card .features li:before {
            content: "✨";
            position: absolute;
            left: 0;
        }

        .cost-info {
            background: #FFF8DC;
            border: 3px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .cost-info h3 {
            color: #FF8C00;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .space-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .space-button {
                min-width: 200px;
            }
            
            .space-iframe {
                height: 500px;
            }
        }

        @media (max-width: 480px) {
            .space-iframe {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">🌈 せかいぬりえ 🎨</h1>
            <p class="subtitle">HuggingFace Spacesで 超忠実ぬりえ！</p>
        </div>

        <div class="info-box">
            <h3>🎉 HuggingFace Spaces版の特徴</h3>
            <ul style="color: #2F4F4F; line-height: 1.6;">
                <li><strong>完全無料</strong>: 基本機能は無料で利用可能</li>
                <li><strong>確実動作</strong>: CORSエラーなし、API設定不要</li>
                <li><strong>3つのSpace</strong>: 用途に応じて選択可能</li>
                <li><strong>高品質</strong>: 専用モデルによる線画生成</li>
            </ul>
        </div>

        <div class="cost-info">
            <h3>💰 料金について</h3>
            <p style="color: #8B4513; line-height: 1.6;">
                <strong>基本利用:</strong> 完全無料 🆓<br>
                <strong>高速処理:</strong> GPUアップグレード時のみ課金（1回数円程度）<br>
                <strong>おすすめ:</strong> まず無料で試して、必要に応じてアップグレード
            </p>
        </div>

        <div class="instructions">
            <h3>🎯 つかいかた</h3>
            <ol>
                <li>下から好きなSpaceを選んでね</li>
                <li>Spaceが読み込まれるまで待ってね</li>
                <li>写真をアップロードしてね</li>
                <li>設定を調整して「Generate」ボタンを押してね</li>
                <li>できあがった線画をダウンロードしてね</li>
            </ol>
        </div>

        <div class="space-info">
            <div class="space-card" onclick="selectSpace('image2drawing')">
                <h4>✏️ Image2Drawing</h4>
                <p>写真を美しい線画に変換する専用Space</p>
                <ul class="features">
                    <li>シンプル・複雑の2スタイル</li>
                    <li>高精度な輪郭抽出</li>
                    <li>ワンクリック変換</li>
                    <li>ダウンロード機能</li>
                </ul>
            </div>

            <div class="space-card" onclick="selectSpace('controlnet')">
                <h4>🎮 ControlNet V1.1</h4>
                <p>ControlNetを使った高品質線画生成</p>
                <ul class="features">
                    <li>Canny Edge Detection</li>
                    <li>カスタマイズ可能</li>
                    <li>プロ品質出力</li>
                    <li>複数モデル対応</li>
                </ul>
            </div>

            <div class="space-card" onclick="selectSpace('coloring')">
                <h4>🎨 Coloring Book</h4>
                <p>塗り絵特化の線画生成Space</p>
                <ul class="features">
                    <li>塗り絵最適化</li>
                    <li>白背景保証</li>
                    <li>太い線画</li>
                    <li>子供向け最適</li>
                </ul>
            </div>
        </div>

        <div class="space-selector">
            <button class="space-button active" onclick="selectSpace('image2drawing')" id="btn-image2drawing">
                ✏️ Image2Drawing
            </button>
            <button class="space-button" onclick="selectSpace('controlnet')" id="btn-controlnet">
                🎮 ControlNet V1.1
            </button>
            <button class="space-button" onclick="selectSpace('coloring')" id="btn-coloring">
                🎨 Coloring Book
            </button>
        </div>

        <!-- Image2Drawing Space -->
        <div class="space-container" id="space-image2drawing">
            <div class="space-title">✏️ Image2Drawing - 写真→線画変換</div>
            <div class="space-description">
                写真を美しい線画に変換する専用Space。シンプルなスタイルと複雑なスタイルが選択できます。
            </div>
            <div class="loading-overlay" id="loading-image2drawing">
                <div class="spinner"></div>
                <p style="color: #FF69B4; font-size: 1.1rem;">Image2Drawing Spaceを読み込み中...</p>
            </div>
            <iframe 
                src="https://awacke1-image-to-line-drawings.hf.space?embed=true" 
                class="space-iframe"
                onload="hideLoading('image2drawing')"
                title="Image2Drawing Space">
            </iframe>
        </div>

        <!-- ControlNet Space -->
        <div class="space-container" id="space-controlnet" style="display: none;">
            <div class="space-title">🎮 ControlNet V1.1 - 高品質線画生成</div>
            <div class="space-description">
                ControlNet V1.1を使用した高品質な線画生成。Cannyエッジ検出で写真に忠実な線画を作成します。
            </div>
            <div class="loading-overlay" id="loading-controlnet">
                <div class="spinner"></div>
                <p style="color: #FF69B4; font-size: 1.1rem;">ControlNet Spaceを読み込み中...</p>
            </div>
            <iframe 
                src="https://hysts-controlnet-v1-1.hf.space?embed=true" 
                class="space-iframe"
                onload="hideLoading('controlnet')"
                title="ControlNet Space">
            </iframe>
        </div>

        <!-- Coloring Book Space -->
        <div class="space-container" id="space-coloring" style="display: none;">
            <div class="space-title">🎨 Coloring Book - 塗り絵特化</div>
            <div class="space-description">
                塗り絵に特化した線画生成Space。白い背景と太い線で、子供でも塗りやすいぬりえを作成します。
            </div>
            <div class="loading-overlay" id="loading-coloring">
                <div class="spinner"></div>
                <p style="color: #FF69B4; font-size: 1.1rem;">Coloring Book Spaceを読み込み中...</p>
            </div>
            <!-- 注意: このSpaceは埋め込み対応していない可能性があるため、代替を用意 -->
            <iframe 
                src="https://huggingface.co/spaces/stabilityai/stable-diffusion?embed=true" 
                class="space-iframe"
                onload="hideLoading('coloring')"
                title="Stable Diffusion Space">
            </iframe>
        </div>

        <div class="info-box" style="margin-top: 30px;">
            <h3>💡 使い方のコツ</h3>
            <ul style="color: #2F4F4F; line-height: 1.6;">
                <li><strong>Image2Drawing</strong>: 最もシンプルで使いやすい</li>
                <li><strong>ControlNet</strong>: 高品質、設定カスタマイズ可能</li>
                <li><strong>Coloring Book</strong>: 塗り絵専用、白背景保証</li>
                <li><strong>処理時間</strong>: 無料版は30秒〜2分程度</li>
                <li><strong>画像サイズ</strong>: 大きすぎる場合は自動リサイズ</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <p style="color: #8B4513; line-height: 1.6;">
                💝 <strong>無料で楽しめます！</strong><br>
                HuggingFace Spacesは基本機能が無料です。<br>
                高速処理が必要な場合のみ、少額の課金があります。
            </p>
        </div>
    </div>

    <script>
        let currentSpace = 'image2drawing';

        function selectSpace(spaceName) {
            // 現在のスペースを非表示
            document.getElementById(`space-${currentSpace}`).style.display = 'none';
            
            // 新しいスペースを表示
            document.getElementById(`space-${spaceName}`).style.display = 'block';
            
            // ボタンのアクティブ状態を更新
            document.querySelectorAll('.space-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`btn-${spaceName}`).classList.add('active');
            
            // 現在のスペースを更新
            currentSpace = spaceName;
            
            // スムーズスクロール
            document.getElementById(`space-${spaceName}`).scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        function hideLoading(spaceName) {
            const loadingOverlay = document.getElementById(`loading-${spaceName}`);
            if (loadingOverlay) {
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 1000); // 1秒後にローディングを非表示
            }
        }

        // ページ読み込み時の初期化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('HuggingFace Spaces版 せかいぬりえ 初期化完了');
            
            // 初期ローディング状態を設定
            setTimeout(() => {
                const initialLoading = document.getElementById('loading-image2drawing');
                if (initialLoading && initialLoading.style.display !== 'none') {
                    initialLoading.style.display = 'none';
                }
            }, 3000); // 3秒後に強制的にローディングを非表示
        });

        // エラーハンドリング
        window.addEventListener('error', function(event) {
            if (event.target.tagName === 'IFRAME') {
                console.log('iframe loading error, but this is normal for some spaces');
            }
        });
    </script>
</body>
</html>